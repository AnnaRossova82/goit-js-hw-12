{"version":3,"file":"commonHelpers.js","sources":["../src/partials/js/pixabay-api.js","../src/partials/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(searchTerm, currentPage, perPage) {\n  const apiKey = '42441729-7dc314f47a8382b16bbe5b871';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(apiUrl);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw new Error('Error fetching images:', error);\n  }\n}\n\n","export function displayImages(images, galleryContainer, lightbox) {\n    images.forEach(image => {\n      const card = document.createElement('div');\n      card.classList.add('card');\n  \n      const a = document.createElement('a');\n      a.href = image.largeImageURL;\n      a.setAttribute('data-lightbox', 'gallery');\n  \n      const img = document.createElement('img');\n      img.src = image.webformatURL;\n      img.alt = image.tags;\n  \n      a.appendChild(img);\n  \n      const cardInfo = document.createElement('div');\n      cardInfo.classList.add('card-info');\n  \n      const title = document.createElement('h3');\n      title.textContent = image.tags;\n  \n      const details = document.createElement('p');\n      details.textContent = `Likes: ${image.likes} | Views: ${image.views} | Comments: ${image.comments} | Downloads: ${image.downloads}`;\n  \n      cardInfo.appendChild(title);\n      cardInfo.appendChild(details);\n  \n      card.appendChild(a);\n      card.appendChild(cardInfo);\n  \n      galleryContainer.appendChild(card);\n      lightbox.refresh();\n      loadMoreBtn.style.display = 'block';\n    });\n}\n  \nimport { loadMoreBtn } from '/main.js';\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './partials/js/pixabay-api.js';\nimport { displayImages } from './partials/js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const galleryContainer = document.getElementById('gallery');\n    const loader = document.getElementById('loader');\n\n    const lightbox = new SimpleLightbox('.gallery-container a');\n\n    let currentPage = 1;\n    let currentSearchTerm = '';\n    const perPage = 15;\n    let loadMoreBtn; \n\n    searchForm.addEventListener('submit', async function (e) {\n        e.preventDefault();\n        currentSearchTerm = searchInput.value.trim();\n        galleryContainer.innerHTML = '';\n        loader.style.display = 'block';\n        if (loadMoreBtn) {\n            loadMoreBtn.style.display = 'none';\n        }\n        currentPage = 1;\n        await fetchAndDisplayImages();\n    });\n\n    loadMoreBtn = document.getElementById('loadMore'); \n\n    loadMoreBtn.addEventListener('click', async function () {\n        loader.style.display = 'block';\n        loadMoreBtn.style.display = 'none'; \n        await fetchAndDisplayImages();\n    });\n\n    async function fetchAndDisplayImages() {\n        try {\n            const data = await fetchImages(currentSearchTerm, currentPage, perPage);\n\n            loader.style.display = 'none';\n\n            if (data.hits.length > 0) {\n                displayImages(data.hits, galleryContainer, lightbox);\n\n                if (currentPage === 1) {\n                    loadMoreBtn.style.display = 'block';\n                }\n                currentPage++;\n\n                const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n\n                window.scrollBy({\n                    top: 2 * cardHeight,\n                    behavior: 'smooth',\n                });\n            } else {\n                if (currentPage === 1) {\n                    loadMoreBtn.style.display = 'none';\n                }\n\n                const totalHits = data.totalHits || 0;\n\n                if (currentPage * perPage >= totalHits) {\n                    iziToast.info({\n                        title: 'Info',\n                        message: 'You have reached the end of search results.',\n                        position: 'topCenter',\n                    });\n                } else {\n                    loadMoreBtn.style.display = 'block'; \n                }\n            }\n        } catch (error) {\n            loader.style.display = 'none';\n            console.error('Error fetching images:', error);\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again later.',\n                position: 'topCenter',\n            });\n        }\n    }\n});\n\nexport const loadMoreBtn = document.getElementById('loadMore');"],"names":["fetchImages","searchTerm","currentPage","perPage","apiUrl","axios","error","displayImages","images","galleryContainer","lightbox","image","card","a","img","cardInfo","title","details","loadMoreBtn","searchForm","searchInput","loader","SimpleLightbox","currentSearchTerm","e","fetchAndDisplayImages","data","cardHeight","totalHits","iziToast"],"mappings":"owBAEO,eAAeA,EAAYC,EAAYC,EAAaC,EAAS,CAElE,MAAMC,EAAS,qEAA4CH,CAAU,iEAAiEC,CAAW,aAAaC,CAAO,GAErK,GAAI,CAGF,OAFiB,MAAME,EAAM,IAAID,CAAM,GACjB,IAEvB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,yBAA0BA,CAAK,CAChD,CACH,CCbO,SAASC,EAAcC,EAAQC,EAAkBC,EAAU,CAC9DF,EAAO,QAAQG,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EAEzB,MAAMC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOF,EAAM,cACfE,EAAE,aAAa,gBAAiB,SAAS,EAEzC,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMH,EAAM,aAChBG,EAAI,IAAMH,EAAM,KAEhBE,EAAE,YAAYC,CAAG,EAEjB,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAU,IAAI,WAAW,EAElC,MAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,YAAcL,EAAM,KAE1B,MAAMM,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YAAc,UAAUN,EAAM,KAAK,aAAaA,EAAM,KAAK,gBAAgBA,EAAM,QAAQ,iBAAiBA,EAAM,SAAS,GAEjII,EAAS,YAAYC,CAAK,EAC1BD,EAAS,YAAYE,CAAO,EAE5BL,EAAK,YAAYC,CAAC,EAClBD,EAAK,YAAYG,CAAQ,EAEzBN,EAAiB,YAAYG,CAAI,EACjCF,EAAS,QAAO,EAChBQ,EAAY,MAAM,QAAU,OAClC,CAAK,CACL,CC3BA,SAAS,iBAAiB,mBAAoB,UAAY,CACtD,MAAMC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDX,EAAmB,SAAS,eAAe,SAAS,EACpDY,EAAS,SAAS,eAAe,QAAQ,EAEzCX,EAAW,IAAIY,EAAe,sBAAsB,EAE1D,IAAIpB,EAAc,EACdqB,EAAoB,GACxB,MAAMpB,EAAU,GAChB,IAAIe,EAEJC,EAAW,iBAAiB,SAAU,eAAgBK,EAAG,CACrDA,EAAE,eAAc,EAChBD,EAAoBH,EAAY,MAAM,OACtCX,EAAiB,UAAY,GAC7BY,EAAO,MAAM,QAAU,QACnBH,IACAA,EAAY,MAAM,QAAU,QAEhChB,EAAc,EACd,MAAMuB,EAAqB,CACnC,CAAK,EAEDP,EAAc,SAAS,eAAe,UAAU,EAEhDA,EAAY,iBAAiB,QAAS,gBAAkB,CACpDG,EAAO,MAAM,QAAU,QACvBH,EAAY,MAAM,QAAU,OAC5B,MAAMO,EAAqB,CACnC,CAAK,EAED,eAAeA,GAAwB,CACnC,GAAI,CACA,MAAMC,EAAO,MAAM1B,EAAYuB,EAAmBrB,EAAaC,CAAO,EAItE,GAFAkB,EAAO,MAAM,QAAU,OAEnBK,EAAK,KAAK,OAAS,EAAG,CACtBnB,EAAcmB,EAAK,KAAMjB,EAAkBC,CAAQ,EAE/CR,IAAgB,IAChBgB,EAAY,MAAM,QAAU,SAEhChB,IAEA,MAAMyB,EAAa,SAAS,cAAc,OAAO,EAAE,sBAAuB,EAAC,OAE3E,OAAO,SAAS,CACZ,IAAK,EAAIA,EACT,SAAU,QAC9B,CAAiB,CACjB,KAAmB,CACCzB,IAAgB,IAChBgB,EAAY,MAAM,QAAU,QAGhC,MAAMU,EAAYF,EAAK,WAAa,EAEhCxB,EAAcC,GAAWyB,EACzBC,EAAS,KAAK,CACV,MAAO,OACP,QAAS,8CACT,SAAU,WAClC,CAAqB,EAEDX,EAAY,MAAM,QAAU,OAEnC,CACJ,OAAQZ,EAAO,CACZe,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,yBAA0Bf,CAAK,EAC7CuB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mEACT,SAAU,WAC1B,CAAa,CACJ,CACJ,CACL,CAAC,EAEM,MAAMX,EAAc,SAAS,eAAe,UAAU"}