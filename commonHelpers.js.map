{"version":3,"file":"commonHelpers.js","sources":["../src/partials/js/pixabay-api.js","../src/partials/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(searchTerm, currentPage, perPage) {\n  const apiKey = '42441729-7dc314f47a8382b16bbe5b871';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(apiUrl);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw new Error('Error fetching images:', error);\n  }\n}\n\n","export function displayImages(images, galleryContainer, lightbox) {\n    images.forEach(image => {\n      const card = document.createElement('div');\n      card.classList.add('card');\n  \n      const a = document.createElement('a');\n      a.href = image.largeImageURL;\n      a.setAttribute('data-lightbox', 'gallery');\n  \n      const img = document.createElement('img');\n      img.src = image.webformatURL;\n      img.alt = image.tags;\n  \n      a.appendChild(img);\n  \n      const cardInfo = document.createElement('div');\n      cardInfo.classList.add('card-info');\n  \n      const title = document.createElement('h3');\n      title.textContent = image.tags;\n  \n      const details = document.createElement('p');\n      details.textContent = `Likes: ${image.likes} | Views: ${image.views} | Comments: ${image.comments} | Downloads: ${image.downloads}`;\n  \n      cardInfo.appendChild(title);\n      cardInfo.appendChild(details);\n  \n      card.appendChild(a);\n      card.appendChild(cardInfo);\n  \n      galleryContainer.appendChild(card);\n      lightbox.refresh();\n      loadMoreBtn.style.display = 'block';\n    });\n}\n  \nimport { loadMoreBtn } from '/main.js';\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './partials/js/pixabay-api.js';\nimport { displayImages } from './partials/js/render-functions.js';\nimport { Spinner } from 'spin.js';\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst galleryContainer = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('loadMore');\n\n\nconst lightbox = new SimpleLightbox('.gallery-container a');\n\n\nconst opts = {\nlines: 13,\nlength: 38,\nwidth: 17,\nradius: 45,\nscale: 1,\ncorners: 1,\nspeed: 1,\nrotate: 0,\nanimation: 'spinner-line-fade-quick',\ndirection: 1,\ncolor: '#16ca34',\nfadeColor: 'transparent',\ntop: '50%',\nleft: '50%',\nshadow: '0 0 1px transparent',\nzIndex: 2000000000,\nclassName: 'spinner',\nposition: 'absolute',\n};\n\n\nconst target = document.getElementById('loader');\nconst spinner = new Spinner(opts);\n\n\nlet currentPage = 1;\nlet currentSearchTerm = '';\nconst perPage = 15;\n\n\nsearchForm.addEventListener('submit', async function (e) {\ne.preventDefault();\nspinner.spin(target);\ncurrentSearchTerm = searchInput.value.trim();\ngalleryContainer.innerHTML = '';\nloadMoreBtn.style.display = 'none';\ncurrentPage = 1;\nawait fetchAndDisplayImages();\n});\n\n\nloadMoreBtn.addEventListener('click', async function () {\nstartSpinner();\nloadMoreBtn.style.display = 'none';\nawait fetchAndDisplayImages();\n});\n\n\nasync function fetchAndDisplayImages() {\n    try {\n        const data = await fetchImages(currentSearchTerm, currentPage, perPage);\n        stopSpinner();\n\n        if (data.hits.length > 0) {\n            displayImages(data.hits, galleryContainer, lightbox);\n\n            const totalHits = data.totalHits || 0;\n            const lastPage = Math.ceil(totalHits / perPage);\n\n            if (currentPage >= lastPage) {\n                iziToast.info({\n                    title: 'Info',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topCenter',\n                });\n                loadMoreBtn.style.display = 'none';\n            } else {\n                loadMoreBtn.style.display = 'block';\n            }\n\n            currentPage++;\n            const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n            window.scrollBy({\n                top: 2 * cardHeight,\n                behavior: 'smooth',\n            });\n        } else {\n            iziToast.info({\n                title: 'Info',\n                message: 'No results found.',\n                position: 'topCenter',\n            });\n            loadMoreBtn.style.display = 'none';\n        }\n    } catch (error) {\n        stopSpinner();\n        console.error('Error fetching images:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topCenter',\n        });\n    }\n}\n\nfunction startSpinner() {\n    spinner.spin(loader);\n}\n\nfunction stopSpinner() {\n    spinner.stop();\n}\n});\n\nexport const loadMoreBtn = document.getElementById('loadMore'); "],"names":["fetchImages","searchTerm","currentPage","perPage","apiUrl","axios","error","displayImages","images","galleryContainer","lightbox","image","card","a","img","cardInfo","title","details","loadMoreBtn","searchForm","searchInput","SimpleLightbox","opts","target","spinner","Spinner","currentSearchTerm","e","fetchAndDisplayImages","startSpinner","data","stopSpinner","totalHits","lastPage","iziToast","cardHeight"],"mappings":"2wBAEO,eAAeA,EAAYC,EAAYC,EAAaC,EAAS,CAElE,MAAMC,EAAS,qEAA4CH,CAAU,iEAAiEC,CAAW,aAAaC,CAAO,GAErK,GAAI,CAGF,OAFiB,MAAME,EAAM,IAAID,CAAM,GACjB,IAEvB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,yBAA0BA,CAAK,CAChD,CACH,CCbO,SAASC,EAAcC,EAAQC,EAAkBC,EAAU,CAC9DF,EAAO,QAAQG,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EAEzB,MAAMC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOF,EAAM,cACfE,EAAE,aAAa,gBAAiB,SAAS,EAEzC,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMH,EAAM,aAChBG,EAAI,IAAMH,EAAM,KAEhBE,EAAE,YAAYC,CAAG,EAEjB,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAU,IAAI,WAAW,EAElC,MAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,YAAcL,EAAM,KAE1B,MAAMM,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YAAc,UAAUN,EAAM,KAAK,aAAaA,EAAM,KAAK,gBAAgBA,EAAM,QAAQ,iBAAiBA,EAAM,SAAS,GAEjII,EAAS,YAAYC,CAAK,EAC1BD,EAAS,YAAYE,CAAO,EAE5BL,EAAK,YAAYC,CAAC,EAClBD,EAAK,YAAYG,CAAQ,EAEzBN,EAAiB,YAAYG,CAAI,EACjCF,EAAS,QAAO,EAChBQ,EAAY,MAAM,QAAU,OAClC,CAAK,CACL,CCzBA,SAAS,iBAAiB,mBAAoB,UAAY,CAC1D,MAAMC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDX,EAAmB,SAAS,eAAe,SAAS,EACpDS,EAAc,SAAS,eAAe,UAAU,EAGhDR,EAAW,IAAIW,EAAe,sBAAsB,EAGpDC,EAAO,CACb,MAAO,GACP,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,MAAO,EACP,QAAS,EACT,MAAO,EACP,OAAQ,EACR,UAAW,0BACX,UAAW,EACX,MAAO,UACP,UAAW,cACX,IAAK,MACL,KAAM,MACN,OAAQ,sBACR,OAAQ,IACR,UAAW,UACX,SAAU,UACV,EAGMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,IAAIC,EAAQH,CAAI,EAGhC,IAAIpB,EAAc,EACdwB,EAAoB,GACxB,MAAMvB,EAAU,GAGhBgB,EAAW,iBAAiB,SAAU,eAAgBQ,EAAG,CACzDA,EAAE,eAAc,EAChBH,EAAQ,KAAKD,CAAM,EACnBG,EAAoBN,EAAY,MAAM,OACtCX,EAAiB,UAAY,GAC7BS,EAAY,MAAM,QAAU,OAC5BhB,EAAc,EACd,MAAM0B,GACN,CAAC,EAGDV,EAAY,iBAAiB,QAAS,gBAAkB,CACxDW,IACAX,EAAY,MAAM,QAAU,OAC5B,MAAMU,GACN,CAAC,EAGD,eAAeA,GAAwB,CACnC,GAAI,CACA,MAAME,EAAO,MAAM9B,EAAY0B,EAAmBxB,EAAaC,CAAO,EAGtE,GAFA4B,IAEID,EAAK,KAAK,OAAS,EAAG,CACtBvB,EAAcuB,EAAK,KAAMrB,EAAkBC,CAAQ,EAEnD,MAAMsB,EAAYF,EAAK,WAAa,EAC9BG,EAAW,KAAK,KAAKD,EAAY7B,CAAO,EAE1CD,GAAe+B,GACfC,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,WAC9B,CAAiB,EACDhB,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,QAGhChB,IACA,MAAMiC,EAAa,SAAS,cAAc,OAAO,EAAE,sBAAuB,EAAC,OAC3E,OAAO,SAAS,CACZ,IAAK,EAAIA,EACT,SAAU,QAC1B,CAAa,CACb,MACYD,EAAS,KAAK,CACV,MAAO,OACP,QAAS,oBACT,SAAU,WAC1B,CAAa,EACDhB,EAAY,MAAM,QAAU,MAEnC,OAAQZ,EAAO,CACZyB,IACA,QAAQ,MAAM,yBAA0BzB,CAAK,EAC7C4B,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mEACT,SAAU,WACtB,CAAS,CACJ,CACL,CAEA,SAASL,GAAe,CACpBL,EAAQ,KAAK,MAAM,CACvB,CAEA,SAASO,GAAc,CACnBP,EAAQ,KAAI,CAChB,CACA,CAAC,EAEM,MAAMN,EAAc,SAAS,eAAe,UAAU"}