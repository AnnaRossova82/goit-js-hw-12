{"version":3,"file":"commonHelpers.js","sources":["../src/partials/js/pixabay-api.js","../src/partials/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(searchTerm, currentPage, perPage) {\n  const apiKey = '42441729-7dc314f47a8382b16bbe5b871';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(apiUrl);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    throw new Error('Error fetching images:', error);\n  }\n}\n\n","export function displayImages(images, galleryContainer, lightbox) {\n    images.forEach(image => {\n      const card = document.createElement('div');\n      card.classList.add('card');\n  \n      const a = document.createElement('a');\n      a.href = image.largeImageURL;\n      a.setAttribute('data-lightbox', 'gallery');\n  \n      const img = document.createElement('img');\n      img.src = image.webformatURL;\n      img.alt = image.tags;\n  \n      a.appendChild(img);\n  \n      const cardInfo = document.createElement('div');\n      cardInfo.classList.add('card-info');\n  \n      const title = document.createElement('h3');\n      title.textContent = image.tags;\n  \n      const details = document.createElement('p');\n      details.textContent = `Likes: ${image.likes} | Views: ${image.views} | Comments: ${image.comments} | Downloads: ${image.downloads}`;\n  \n      cardInfo.appendChild(title);\n      cardInfo.appendChild(details);\n  \n      card.appendChild(a);\n      card.appendChild(cardInfo);\n  \n      galleryContainer.appendChild(card);\n      lightbox.refresh();\n      loadMoreBtn.style.display = 'block';\n    });\n}\n  \nimport { loadMoreBtn } from '/main.js';\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './partials/js/pixabay-api.js';\nimport { displayImages } from './partials/js/render-functions.js';\nimport { Spinner } from 'spin.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const galleryContainer = document.getElementById('gallery');\n    const loader = document.getElementById('loader');\n    const loadMoreBtn = document.getElementById('loadMore');  \n\n    const lightbox = new SimpleLightbox('.gallery-container a');\n    \n  const opts = {\n        lines: 13, \n        length: 38, \n        width: 17, \n        radius: 45, \n        scale: 1, \n        corners: 1, \n        speed: 1, \n        rotate: 0, \n        animation: 'spinner-line-fade-quick', \n        direction: 1, \n        color: '#16ca34', \n        fadeColor: 'transparent', \n        top: '50%', \n        left: '50%', \n        shadow: '0 0 1px transparent', \n        zIndex: 2000000000, \n        className: 'spinner', \n        position: 'absolute', \n      };\n      \n   const target = document.getElementById('loader');\n   const spinner = new Spinner(opts);\n\n\n    let currentPage = 1;\n    let currentSearchTerm = '';\n    const perPage = 15;\n\n    searchForm.addEventListener('submit', async function (e) {\n        e.preventDefault();\n        spinner.spin(target);\n        currentSearchTerm = searchInput.value.trim();\n        galleryContainer.innerHTML = '';\n        loadMoreBtn.style.display = 'none';\n        currentPage = 1;\n        await fetchAndDisplayImages();\n    });\n\n    loadMoreBtn.addEventListener('click', async function () {\n        startSpinner();\n        loadMoreBtn.style.display = 'none';\n        await fetchAndDisplayImages();\n    });\n\n    async function fetchAndDisplayImages() {\n        try {\n            const data = await fetchImages(currentSearchTerm, currentPage, perPage);\n            stopSpinner();\n\n            if (data.hits.length > 0) {\n                displayImages(data.hits, galleryContainer, lightbox);\n\n                if (currentPage === 1) {\n                    loadMoreBtn.style.display = 'block';\n                }\n                currentPage++;\n                const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n                window.scrollBy({\n                    top: 2 * cardHeight,\n                    behavior: 'smooth',\n                });\n            } else {\n                if (currentPage === 1) {\n                    loadMoreBtn.style.display = 'none';\n                }\n\n                const totalHits = data.totalHits || 0;\n\n                if (currentPage * perPage >= totalHits) {\n                    iziToast.info({\n                        title: 'Info',\n                        message: 'You have reached the end of search results.',\n                        position: 'topCenter',\n                    });\n                    loadMoreBtn.style.display = 'none';\n                } else {\n                    loadMoreBtn.style.display = 'block';\n                }\n            }\n        } catch (error) {\n            stopSpinner();\n            console.error('Error fetching images:', error);\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again later.',\n                position: 'topCenter',\n            });\n        }\n    }\n\n    function startSpinner() {\n        spinner.spin(loader);\n    }\n\n    function stopSpinner() {\n        spinner.stop();\n    }\n});\n\nexport const loadMoreBtn = document.getElementById('loadMore');"],"names":["fetchImages","searchTerm","currentPage","perPage","apiUrl","axios","error","displayImages","images","galleryContainer","lightbox","image","card","a","img","cardInfo","title","details","loadMoreBtn","searchForm","searchInput","loader","SimpleLightbox","opts","target","spinner","Spinner","currentSearchTerm","e","fetchAndDisplayImages","startSpinner","data","stopSpinner","cardHeight","totalHits","iziToast"],"mappings":"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"}